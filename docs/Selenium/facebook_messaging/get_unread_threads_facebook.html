<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>get unread threads facebook</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <style>
    html {
      padding: 0;
      margin: 0;
    }

    nav {
      position: fixed;
      overflow: auto;
      top: 0;
      left: 0;
      right: auto;
      bottom: 0;
      width: 200px;
    }

    header {
      background-color: #EEE;
      padding: 10px;
    }

    body {
      padding: 0 0 0 200px;
      margin: 0;
    }

    @media screen and (max-width: 600px) {
      body {
        padding-left: 0;
      }

      nav {
        display: none;
      }
    }
  </style>
</head>

<body>
  <nav>
    <h3><a href="../facebook_messaging/index.html">facebook messaging</a></h3>
    <a href="./get_unread_threads_facebook.html">get unread threads facebook</a>
<br /><br />
<a href="./scan_commands_facebook.html">scan commands facebook</a>
<br /><br />
<a href="./sync_facebook_threads.html">sync facebook threads</a>
<br /><br />
<a href="./List_Facebook_threads.html">List Facebook threads</a>
<br /><br />
<a href="./Get_messages_from_facebook.html">Get messages from facebook</a>
<br /><br />
<a href="./cell_5.html">Cell 5</a>
<br /><br />
<a href="./send_facebook_message.html">send facebook message</a>
<br /><br />

  </nav>
  <header>
    <a href="../facebook_messaging/index.html">facebook messaging</a> |  | <a href="./scan_commands_facebook.html">scan commands facebook</a>
  </header>

  <p>This code automates the process of retrieving and reading unread Facebook threads by logging into the user's account, navigating to the unread messages page, listing the threads, and then reading the content of each thread.  It is designed to be used as a reusable function within a larger application.</p>
<h2>Run example</h2>

<pre language="bash"><code>npm run import -- "get unread threads facebook"</code></pre><h1>get unread threads facebook</h1>



<pre class="javascript"><code>var importer = require('../Core');
var {
    loginFacebook,
    listFacebookThreads,
    readFacebookThread
} = importer.import([
    'decrypt password',
    'log in facebook',
    'list facebook threads',
    'messages from facebook'
], {client})

function getUnreadThreads() {
    return client
        .then(() =&gt; loginFacebook())
        .getUrl()
        .then(url =&gt; url.indexOf('https://www.facebook.com/messages/?filter=unread') === -1
             ? client.url('https://www.facebook.com/messages/?filter=unread')
             : [])
        .pause(500)
        .then(() =&gt; listFacebookThreads(false))
        .then(threads =&gt; {
            return importer.runAllPromises(threads.map(thread =&gt; resolve =&gt; {
                return readFacebookThread(thread)
                    .catch(e =&gt; console.log(e))
                    .then(r =&gt; resolve(r))
            }))
        })
        .catch(e =&gt; console.log(e))
}
module.exports = getUnreadThreads;
</code></pre>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>

<script>hljs.highlightAll();</script>

<p>This code snippet is designed to retrieve and read unread Facebook threads.</p>
<p>Here's a breakdown:</p>
<ol>
<li><p><strong>Setup:</strong> It imports necessary functions for logging into Facebook, listing threads, and reading thread content from a custom <code>importer</code> module.</p></li>
<li><p><strong><code>getUnreadThreads</code> Function:</strong></p>
<ul>
<li>It first logs into Facebook using the imported <code>loginFacebook</code> function.</li>
<li>It navigates to the &quot;Unread Messages&quot; page if not already there.</li>
<li>It uses <code>listFacebookThreads</code> to fetch a list of unread threads.</li>
<li>It then iterates through each thread and uses <code>readFacebookThread</code> to read the content of each thread.</li>
<li>It handles any errors during the process.</li>
</ul></li>
<li><p><strong>Export:</strong> The <code>getUnreadThreads</code> function is exported, making it callable from other parts of the application.</p></li>
</ol>

</body>

</html>