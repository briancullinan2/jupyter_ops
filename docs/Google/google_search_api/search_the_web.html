<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>search the web</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <style>
    html {
      padding: 0;
      margin: 0;
    }

    nav {
      position: fixed;
      overflow: auto;
      top: 0;
      left: 0;
      right: auto;
      bottom: 0;
      width: 200px;
    }

    header {
      background-color: #EEE;
      padding: 10px;
    }

    body {
      padding: 0 0 0 200px;
      margin: 0;
    }

    .gold pre code,
    .gold pre code span,
    .gold code pre,
    .gold code pre span {
      color: gold;
    }

    @media screen and (max-width: 600px) {
      body {
        padding-left: 0;
      }

      nav {
        display: none;
      }
    }
  </style>
</head>

<body>
  <nav>
    <h3><a href="../google_search_api/index.html">google search api</a></h3>
    <a href="./search_the_web.html">search the web</a>
<br /><br />
<a href="./test_custom_search.html">test custom search</a>
<br /><br />
<a href="./authorize_custom_search.html">authorize custom search</a>
<br /><br />

  </nav>
  <header>
    <a href="../google_search_api/index.html">google search api</a> |  | <a href="./test_custom_search.html">test custom search</a> | <a href="../../search.html">Search</a>
  </header>

  <p>This code defines a function that performs custom Google searches using the Google Custom Search Engine API, handling authentication and returning the search results data.  It's designed to be reusable in other parts of an application.</p>
<h2>Run example</h2>

<pre language="bash"><code>npm run import -- "search the web"</code></pre><h1>search the web</h1>



<pre class="javascript"><code>var importer = require('../Core');
var authorizeSearch = importer.import("<a href="../../Google/google_search_api/authorize_custom_search.html">authorize custom search</a>");

async function search(q) {
    var params = {
        num: 10,
        cx: '002593731262048611104:885kc72tzdc',
        q: q
    };
    var client = await authorizeSearch();
    var r = await client.request({
        method: 'GET',
        url: `https://www.googleapis.com/customsearch/v1`,
        params
    })
    return r.data
}

module.exports = search;
</code></pre>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
<script src="../../mergehtml.js"></script>

<script>
hljs.addPlugin(mergeHTMLPlugin);
hljs.highlightAll();
</script>

<div class="gold"><h2>What the code could have been:</h2>
<pre class="javascript"><code>// Import required modules and functions
const { authorizeCustomSearch } = require('../Core');

/**
 * Search for custom search results using Google Custom Search API
 * @param {string} q - Search query
 * @return {Promise<object>} - Custom search results
 */
async function search(q) {
    // Define search parameters
    const params = {
        num: 10,
        cx: '002593731262048611104:885kc72tzdc',
        q: q
    };

    // Authorize search API client
    const client = await authorizeCustomSearch();

    // Make GET request to Custom Search API
    const response = await client.request({
        method: 'GET',
        url: 'https://www.googleapis.com/customsearch/v1',
        params
    });

    // Return search results
    return response.data;
}

// Export search function
module.exports = search;</code></pre></div><p>This code snippet defines a function <code>search</code> that performs a custom Google Search using the Google Custom Search Engine API.</p>
<p>Here's a breakdown:</p>
<ol>
<li><p><strong>Dependencies:</strong> It imports a function <code>authorizeSearch</code> from a local module <code>Core</code> which likely handles authentication with the Google Custom Search Engine API.</p></li>
<li><p><strong><code>search</code> Function:</strong></p>
<ul>
<li>Takes a search query <code>q</code> as input.</li>
<li>Defines search parameters including the number of results (<code>num</code>), the custom search engine ID (<code>cx</code>), and the search query (<code>q</code>).</li>
<li>Uses <code>authorizeSearch</code> to obtain an authorized client for making API requests.</li>
<li>Sends a GET request to the Google Custom Search Engine API endpoint using the provided parameters.</li>
<li>Returns the search results data (<code>r.data</code>) from the API response.</li>
</ul></li>
<li><p><strong>Export:</strong> The <code>search</code> function is exported as a module, allowing it to be used in other parts of the application.</p></li>
</ol>

</body>

</html>