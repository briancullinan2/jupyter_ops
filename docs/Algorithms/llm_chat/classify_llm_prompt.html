<p>Here is a 2 sentence summary of the code:</p>
<p>This code defines a set of functions and constants to facilitate interacting with an API, including generating a description of the API functions and asking the user to match a prompt with an API function. The code exports four values, allowing other parts of the program to access and use the API functions and their corresponding exports and descriptions.</p>


<pre><code>const getExports = importer.import('get exports from source')


const API_FUNCTIONS = [
  'load message history',
  'general chit chat',
  'brians resume',
  'file system access',
  'access web information',
  'stable diffusion request',
  'request ollama vision',
  //'ask another llm for help',
  'add conversation context',
  'llm save memories'
  // 'switch llm models'
]

const API_EXPORTS = API_FUNCTIONS.map(func => getExports(importer.interpret(func).code)[0])

const API_DESCRIPTION = API_FUNCTIONS
  .map(func => importer.interpret(func))
  .filter((code, i) => API_EXPORTS[i])
  .map((code, i) => API_EXPORTS[i] + ' - ' + code.markdown.join('').trim()
    .replaceAll(/^#.*?\n/gi, '')
    .replaceAll(code.questions, '')
    .replaceAll(/\s*[\n]+[\s\r\n]*/gi, '-'))
  .join('\n')

async function askLlamaMatchingFunction(promptModel, prompt, image) {

  let q1 = 'Given the following functions:\n'
    + API_DESCRIPTION + '\nDo any of these functions relate to this prompt:\n'
    + (image ? 'An image has been provided as a part of the input.' : '')
    + prompt + '\nOnly return the function names in order of relevance.'
  console.log('User: ' + q1)
  let a1 = await promptModel(q1)
  console.log('AI: ' + a1)

  let matchingFunctions = a1.split(/\s*\n\s*|\s*,\s*/gi)
    .map((matchStr) => {
      for (let i = 0; i < API_FUNCTIONS.length; i++) {
        if (!API_EXPORTS[i]) {
          continue
        }
        if (API_EXPORTS[i].includes(matchStr) || matchStr.match(API_EXPORTS[i])) {
          return ({
            importStr: API_FUNCTIONS[i],
            exportStr: API_EXPORTS[i]
          })
        }
      }
    })
    .filter(func => a1.length > 0 && func)
    .map(func => func.importStr)

  return matchingFunctions
}

module.exports = {
  askLlamaMatchingFunction,
  API_FUNCTIONS,
  API_EXPORTS,
  API_DESCRIPTION,
}

</code></pre>

<p><strong>Breakdown of the Code</strong></p>
<h3>Section 1: Importing and Defining Constants</h3>
<ul>
<li><code>getExports</code> is a function that imports and exports functionality from a source.</li>
<li><code>API_FUNCTIONS</code> is an array of API function names.</li>
<li><code>API_EXPORTS</code> is an array of API function exports, obtained by calling <code>getExports</code> for each function in <code>API_FUNCTIONS</code>.</li>
<li><code>API_DESCRIPTION</code> is a string containing a description of the API functions, generated by mapping over <code>API_FUNCTIONS</code>, interpreting each function as Markdown, filtering out empty descriptions, and combining the results.</li>
</ul>
<h3>Section 2: Defining the <code>askLlamaMatchingFunction</code> Function</h3>
<ul>
<li>The function <code>askLlamaMatchingFunction</code> takes three arguments: <code>promptModel</code>, <code>prompt</code>, and <code>image</code>.</li>
<li>It generates a question for the user, asking them to match the provided prompt with one of the API functions.</li>
<li>The function then waits for the user's response, processes the response to identify matching API functions, and returns an array of matching function names.</li>
</ul>
<h3>Section 3: Exports</h3>
<ul>
<li>The code exports four values:
<ul>
<li><code>askLlamaMatchingFunction</code>: the function that can be used to ask the user to match a prompt with an API function.</li>
<li><code>API_FUNCTIONS</code>: the array of API function names.</li>
<li><code>API_EXPORTS</code>: the array of API function exports.</li>
<li><code>API_DESCRIPTION</code>: the string describing the API functions.</li>
</ul></li>
</ul>
