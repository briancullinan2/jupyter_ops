<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>python write video</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <style>
    html {
      padding: 0;
      margin: 0;
    }

    nav {
      position: fixed;
      overflow: auto;
      top: 0;
      left: 0;
      right: auto;
      bottom: 0;
      width: 200px;
    }

    header {
      background-color: #EEE;
      padding: 10px;
    }

    body {
      padding: 0 0 0 200px;
      margin: 0;
    }

    @media screen and (max-width: 600px) {
      body {
        padding-left: 0;
      }

      nav {
        display: none;
      }
    }
  </style>
</head>

<body>
  <nav>
    <h3><a href="../opencv/index.html">opencv</a></h3>
    <a href="./detect_people.html">detect people</a>
<br /><br />
<a href="./motion_detection.html">motion detection</a>
<br /><br />
<a href="./python_write_video.html">python write video</a>
<br /><br />
<a href="./python_write_images_to_ffmpeg_stream.html">python write images to ffmpeg stream</a>
<br /><br />
<a href="./create_a_live_streaming_request.html">create a live streaming request</a>
<br /><br />
<a href="./authorize_youtube_in_python.html">authorize youtube in python</a>
<br /><br />
<a href="./list_broadcasts.html">list broadcasts</a>
<br /><br />
<a href="./create_live_stream.html">create live stream</a>
<br /><br />
<a href="./list_live_stream.html">list live stream</a>
<br /><br />
<a href="./bind_youtube_stream.html">bind youtube stream</a>
<br /><br />
<a href="./transition_live_stream.html">transition live stream</a>
<br /><br />

  </nav>
  <header>
    <a href="../opencv/index.html">opencv</a> | <a href="./motion_detection.html">motion detection</a> | <a href="./python_write_images_to_ffmpeg_stream.html">python write images to ffmpeg stream</a>
  </header>

  <p>The code imports OpenCV and glob libraries, sets output video properties, and defines a <code>write_video</code> function that creates an output video from a list of images. The function gets the list of images, defines a <code>VideoWriter</code> object, writes each image to the video, and releases the object after cleanup.</p>
<h2>Run example</h2>

<pre language="bash"><code>npm run import -- "python write video"</code></pre><h1>python write video</h1>



<pre class="python"><code>import cv2
import glob

# Set output video properties
fps = 30
output_file = "output.mp4"

def write_video():
  # Get list of images
  image_files = sorted(glob.glob("frame_*.jpg"))  # Adjust pattern as needed

  # Read first image to get dimensions
  frame = cv2.imread(image_files[0])
  height, width, _ = frame.shape

  # Define VideoWriter object
  fourcc = cv2.VideoWriter_fourcc(*"mp4v")  # Codec
  out = cv2.VideoWriter(output_file, fourcc, fps, (width, height))

  # Write images to video
  for img_path in image_files:
      frame = cv2.imread(img_path)
      out.write(frame)

  # Cleanup
  out.release()
  cv2.destroyAllWindows()

__all__ = {
  "write_video": write_video
}
</code></pre>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/python.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>

<script>hljs.highlightAll();</script>

<h2>Code Breakdown</h2>
<h3>Importing Libraries</h3>
<p>The code starts by importing two libraries:</p>
<ul>
<li><code>cv2</code>: OpenCV, a computer vision library used for image and video processing.</li>
<li><code>glob</code>: A library used for finding files based on patterns.</li>
</ul>
<h3>Setting Output Video Properties</h3>
<p>The code sets two properties for the output video:</p>
<ul>
<li><code>fps</code>: The frame rate of the output video, set to 30 frames per second.</li>
<li><code>output_file</code>: The file name of the output video, set to &quot;output.mp4&quot;.</li>
</ul>
<h3>write_video Function</h3>
<p>The <code>write_video</code> function takes care of creating the output video. Here's a step-by-step breakdown:</p>
<ol>
<li><strong>Get list of images</strong>: It uses <code>glob</code> to find all files with the pattern &quot;frame_*.jpg&quot; and sorts the list.</li>
<li><strong>Read first image to get dimensions</strong>: It reads the first image in the list using <code>cv2.imread</code> to get the dimensions (height and width).</li>
<li><strong>Define VideoWriter object</strong>: It creates a <code>VideoWriter</code> object using <code>cv2.VideoWriter</code>, specifying the codec (&quot;mp4v&quot;), frame rate (30), and frame dimensions (height and width).</li>
<li><strong>Write images to video</strong>: It iterates over the list of images and writes each image to the video using <code>out.write(frame)</code>.</li>
<li><strong>Cleanup</strong>: It releases the <code>VideoWriter</code> object and closes all OpenCV windows using <code>cv2.destroyAllWindows</code>.</li>
</ol>
<h3>Exporting the write_video Function</h3>
<p>The code exports the <code>write_video</code> function using the <code>__all__</code> attribute, making it available for import in other modules.</p>

</body>

</html>