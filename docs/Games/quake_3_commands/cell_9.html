<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>Cell 9</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <style>
    html {
      padding: 0;
      margin: 0;
    }

    nav {
      position: fixed;
      overflow: auto;
      top: 0;
      left: 0;
      right: auto;
      bottom: 0;
      width: 200px;
    }

    header {
      background-color: #EEE;
      padding: 10px;
    }

    body {
      padding: 0 0 0 200px;
      margin: 0;
    }

    @media screen and (max-width: 600px) {
      body {
        padding-left: 0;
      }

      nav {
        display: none;
      }
    }
  </style>
</head>

<body>
  <nav>
    <h3><a href="../quake_3_commands/index.html">quake 3 commands</a></h3>
    <a href="./cell_0.html">Cell 0</a>
<br /><br />
<a href="./cell_1.html">Cell 1</a>
<br /><br />
<a href="./cell_2.html">Cell 2</a>
<br /><br />
<a href="./Try_streaming_the_game_over_VNC__is_it_awful_Kind_of__and_inputs_don_t_work_as_expected_.html">Try streaming the game over VNC, is it awful Kind of, and inputs don't work as expected.</a>
<br /><br />
<a href="./cell_4.html">Cell 4</a>
<br /><br />
<a href="./cell_5.html">Cell 5</a>
<br /><br />
<a href="./https___quake_games_set_20name_20player_name.html">https://quake.games/set%20name%20player_name</a>
<br /><br />
<a href="./cell_7.html">Cell 7</a>
<br /><br />
<a href="./cell_8.html">Cell 8</a>
<br /><br />
<a href="./cell_9.html">Cell 9</a>
<br /><br />
<a href="./cell_10.html">Cell 10</a>
<br /><br />
<a href="./cell_11.html">Cell 11</a>
<br /><br />
<a href="./cell_12.html">Cell 12</a>
<br /><br />
<a href="./cell_13.html">Cell 13</a>
<br /><br />
<a href="./cell_14.html">Cell 14</a>
<br /><br />
<a href="./cell_15.html">Cell 15</a>
<br /><br />
<a href="./cell_16.html">Cell 16</a>
<br /><br />

  </nav>
  <header>
    <a href="../quake_3_commands/index.html">quake 3 commands</a> | <a href="./cell_8.html">Cell 8</a> | <a href="./cell_10.html">Cell 10</a>
  </header>

  <p>These scripts and commands are used to convert various image files to TGA format, with options to handle different file types (PCX, JPG, JPEG) and color spaces. They use tools like <code>wal2tga</code>, <code>convert</code>, and <code>find</code> to automate the conversion process in Windows and Bash environments.</p>
<h1>Cell 9</h1>



<pre class="bash"><code>
for /r %%v in (*.wal) do "Z:\planet_quake_data\tools\Wal2TGA\wal2tga copy.exe" "%%v" "%%~dpv%%~nv.tga"

# TODO: bash uses glob, windows can use "or" keyword
#windows
for /r %%v in (*.pcx or *.jpg or *.jpeg) do convert -colorspace RGB "%%v" "%%~dpv%%~nv.tga" ; done

#bash
for i in $(find . -iname '*.pcx' -o -iname '*.jpg' -o -iname '*.jpeg' -o -iname '*.tga'); \
do if [ ! -f "${i%.*}.tga" ]; \
then convert -colorspace RGB "$i" "${i%.*}.tga"; \
fi; \
done;


convert -colorspace RGB pak0.pk3dir/models/deadbods/dude/dead1.pcx pak0.pk3dir/models/deadbods/dude/dead1.tga
</code></pre>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>

<script>hljs.highlightAll();</script>

<p><strong>Code Breakdown</strong></p>
<h3>Windows Script</h3>
<pre><code class="language-bash">for /r %%v in (*.wal) do &quot;Z:\planet_quake_data\tools\Wal2TGA\wal2tga copy.exe&quot; &quot;%%v&quot; &quot;%%~dpv%%~nv.tga&quot;
</code></pre>
<ul>
<li>This is a Windows batch script that loops through all files with the <code>.wal</code> extension in the current directory and its subdirectories (<code>/r</code> option).</li>
<li>For each file, it runs the <code>wal2tga copy.exe</code> executable from the specified path, passing the file path (<code>%%v</code>) and a new TGA file path generated by combining the original file's directory path (<code>%%~dpv</code>) and name (<code>%%~nv</code>) with a <code>.tga</code> extension.</li>
</ul>
<h3>Windows Script (Alternative)</h3>
<pre><code class="language-bash">for /r %%v in (*.pcx or *.jpg or *.jpeg) do convert -colorspace RGB &quot;%%v&quot; &quot;%%~dpv%%~nv.tga&quot; ; done
</code></pre>
<ul>
<li>This script is similar to the previous one but loops through files with the <code>.pcx</code>, <code>.jpg</code>, and <code>.jpeg</code> extensions.</li>
<li>For each file, it runs the <code>convert</code> command from ImageMagick, converting the file to RGB color space and saving it as a new TGA file in the same directory.</li>
</ul>
<h3>Bash Script</h3>
<pre><code class="language-bash">for i in $(find. -iname '*.pcx' -o -iname '*.jpg' -o -iname '*.jpeg' -o -iname '*.tga'); \
do if [! -f &quot;${i%.*}.tga&quot; ]; \
then convert -colorspace RGB &quot;$i&quot; &quot;${i%.*}.tga&quot;; \
fi; \
done;
</code></pre>
<ul>
<li>This script uses <code>find</code> to search for files with the <code>.pcx</code>, <code>.jpg</code>, <code>.jpeg</code>, and <code>.tga</code> extensions in the current directory and its subdirectories (<code>.</code>).</li>
<li>For each file, it checks if a corresponding TGA file with the same name but different extension exists. If not, it runs the <code>convert</code> command from ImageMagick, converting the file to RGB color space and saving it as a new TGA file in the same directory.</li>
</ul>
<h3>Single Command Example</h3>
<pre><code class="language-bash">convert -colorspace RGB pak0.pk3dir/models/deadbods/dude/dead1.pcx pak0.pk3dir/models/deadbods/dude/dead1.tga
</code></pre>
<ul>
<li>This is a single command that converts a specific PCX file to a TGA file using the <code>convert</code> command from ImageMagick.</li>
</ul>

</body>

</html>