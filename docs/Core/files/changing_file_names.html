<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>changing file names</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <style>
    html {
      padding: 0;
      margin: 0;
    }

    nav {
      position: fixed;
      overflow: auto;
      top: 0;
      left: 0;
      right: auto;
      bottom: 0;
      width: 200px;
    }

    header {
      background-color: #EEE;
      padding: 10px;
    }

    body {
      padding: 0 0 0 200px;
      margin: 0;
    }

    @media screen and (max-width: 600px) {
      body {
        padding-left: 0;
      }

      nav {
        display: none;
      }
    }
  </style>
</head>

<body>
  <nav>
    <h3><a href="../files/index.html">files</a></h3>
    <a href="./cell_0.html">Cell 0</a>
<br /><br />
<a href="./project_word-cloud.html">project word-cloud</a>
<br /><br />
<a href="./project_imports_d3_tree.html">project imports d3 tree</a>
<br /><br />
<a href="./__glob_files.html">, glob files</a>
<br /><br />
<a href="./cell_4.html">Cell 4</a>
<br /><br />
<a href="./list_project_files.html">list project files</a>
<br /><br />
<a href="./common_ignore_paths.html">common ignore paths</a>
<br /><br />
<a href="./List_all_projects_by_names.html">List all projects by names</a>
<br /><br />
<a href="./cell_8.html">Cell 8</a>
<br /><br />
<a href="./fix_project_paths.html">fix project paths</a>
<br /><br />
<a href="./cell_10.html">Cell 10</a>
<br /><br />
<a href="./__________________1__________.html">(=\{((:[^{}]++|\{(1)\})++)\})</a>
<br /><br />
<a href="./cell_12.html">Cell 12</a>
<br /><br />
<a href="./file_tools__match_filename.html">file tools, match filename</a>
<br /><br />
<a href="./mkdirp.html">mkdirp</a>
<br /><br />
<a href="./changing_file_names.html">changing file names</a>
<br /><br />
<a href="./use_memory-fs_and_rewire_to_audit_cli_events.html">use memory-fs and rewire to audit cli events</a>
<br /><br />
<a href="./TODO__combine_with_DOM_minimizing_service_from_recording_app.html">TODO: combine with DOM minimizing service from recording app</a>
<br /><br />
<a href="./cell_18.html">Cell 18</a>
<br /><br />

  </nav>
  <header>
    <a href="../files/index.html">files</a> | <a href="./mkdirp.html">mkdirp</a> | <a href="./use_memory-fs_and_rewire_to_audit_cli_events.html">use memory-fs and rewire to audit cli events</a>
  </header>

  <p>This code provides two utility functions, <code>chext</code> and <code>chroot</code>, for manipulating file paths: <code>chext</code> changes a file's extension, while <code>chroot</code> rewrites a file path by removing a specified root directory and joining it with a new output directory.</p>
<h2>Run example</h2>

<pre language="bash"><code>npm run import -- "changing file names"</code></pre><h1>changing file names</h1>



<pre class="javascript"><code>var path = require('path')

function chext(file, ext) {
    return file.replace(new RegExp('\\' + path.extname(file) + '
</body>

</html>), ext)
}

function chroot(file, root, output) {
    // TODO: example of defensive programming
    if(file.substr(0, root.length).localeCompare(root) !== 0)
        throw new Error(`File not in root ${file}`)
    return path.join(output, file.substr(root.length))
}

module.exports = {
    chext,
    chroot,
}</code></pre>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>

<script>hljs.highlightAll();</script>

<p>This code defines two utility functions for manipulating file paths: <code>chext</code> and <code>chroot</code>.</p>
<p>Here's a breakdown:</p>
<ol>
<li><p><strong><code>chext(file, ext)</code>:</strong></p>
<ul>
<li>Takes a file path (<code>file</code>) and an extension (<code>ext</code>) as input.</li>
<li>Replaces the existing extension of the file with the provided <code>ext</code> using a regular expression.</li>
<li>Returns the modified file path with the new extension.</li>
</ul></li>
<li><p><strong><code>chroot(file, root, output)</code>:</strong></p>
<ul>
<li>Takes a file path (<code>file</code>), a root directory (<code>root</code>), and an output directory (<code>output</code>) as input.</li>
<li>Performs a check to ensure the input file is within the specified <code>root</code> directory. If not, it throws an error.</li>
<li>Constructs a new file path by removing the <code>root</code> directory from the input file and joining it with the <code>output</code> directory.</li>
<li>Returns the transformed file path.</li>
</ul></li>
<li><p><strong>Module Exports:</strong></p>
<ul>
<li>The module exports both <code>chext</code> and <code>chroot</code> functions, making them available for use in other parts of the application.</li>
</ul></li>
</ol>
<p>In essence, this code provides convenient functions for modifying file extensions and changing the root directory of file paths, which can be useful for tasks like file renaming, path manipulation, or working with relative paths.</p>

</body>

</html>