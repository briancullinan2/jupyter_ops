<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>list project files</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <style>
    html {
      padding: 0;
      margin: 0;
    }

    nav {
      position: fixed;
      overflow: auto;
      top: 0;
      left: 0;
      right: auto;
      bottom: 0;
      width: 200px;
    }

    header {
      background-color: #EEE;
      padding: 10px;
    }

    body {
      padding: 0 0 0 200px;
      margin: 0;
    }

    .gold pre code,
    .gold pre code span,
    .gold code pre,
    .gold code pre span {
      color: gold;
    }

    @media screen and (max-width: 600px) {
      body {
        padding-left: 0;
      }

      nav {
        display: none;
      }
    }
  </style>
</head>

<body>
  <nav>
    <h3><a href="../files/index.html">files</a></h3>
    <a href="./cell_0.html">Cell 0</a>
<br /><br />
<a href="./project_word-cloud.html">project word-cloud</a>
<br /><br />
<a href="./project_imports_d3_tree.html">project imports d3 tree</a>
<br /><br />
<a href="./__glob_files.html">, glob files</a>
<br /><br />
<a href="./cell_4.html">Cell 4</a>
<br /><br />
<a href="./list_project_files.html">list project files</a>
<br /><br />
<a href="./common_ignore_paths.html">common ignore paths</a>
<br /><br />
<a href="./List_all_projects_by_names.html">List all projects by names</a>
<br /><br />
<a href="./cell_8.html">Cell 8</a>
<br /><br />
<a href="./fix_project_paths.html">fix project paths</a>
<br /><br />
<a href="./cell_10.html">Cell 10</a>
<br /><br />
<a href="./__________________1__________.html">(=\{((:[^{}]++|\{(1)\})++)\})</a>
<br /><br />
<a href="./cell_12.html">Cell 12</a>
<br /><br />
<a href="./file_tools__match_filename.html">file tools, match filename</a>
<br /><br />
<a href="./mkdirp.html">mkdirp</a>
<br /><br />
<a href="./changing_file_names.html">changing file names</a>
<br /><br />
<a href="./use_memory-fs_and_rewire_to_audit_cli_events.html">use memory-fs and rewire to audit cli events</a>
<br /><br />
<a href="./TODO__combine_with_DOM_minimizing_service_from_recording_app.html">TODO: combine with DOM minimizing service from recording app</a>
<br /><br />
<a href="./cell_18.html">Cell 18</a>
<br /><br />

  </nav>
  <header>
    <a href="../files/index.html">files</a> | <a href="./cell_4.html">Cell 4</a> | <a href="./common_ignore_paths.html">common ignore paths</a> | <a href="../../search.html">Search</a>
  </header>

  <p>This code imports modules and exports a <code>listInProject</code> function that searches for files in a specified directory using glob patterns.</p>
<h2>Run example</h2>

<pre language="bash"><code>npm run import -- "list project files"</code></pre><h1>list project files</h1>



<pre class="javascript"><code>var path = require('path');
var {ignores} = importer.import("<a href="../../Core/files/common_ignore_paths.html">common ignore paths</a>");
var {glob} = importer.import("<a href="../../Core/files/__glob_files.html">glob files</a>")

// TODO: pull all from gitignore library and add to ignore list
//  https://github.com/github/gitignore
// TODO: submit script to github project for fame and fortune!

// But we also want to automatically load projects?
function listInProject(root, match = '{,*,*/,*/*/*,*/*/*/*,*/*/*/*/*}package.json') {
    return glob(match, path.resolve(root))
}

module.exports = {
    listInProject
}
</code></pre>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
<script src="../../mergehtml.js"></script>

<script>
hljs.addPlugin(mergeHTMLPlugin);
hljs.highlightAll();
</script>

<div class="gold"><h2>What the code could have been:</h2>
<pre class="javascript"><code>const path = require('path');
const { ignores } = require('gitignore-webpack-plugin');
const glob = require('glob');

/**
 * Lists files in a project directory based on a glob pattern.
 *
 * @param {string} root - The project root directory.
 * @param {string} [match='{,*,*/,*/*/*,*/*/*/*,*/*/*/*/*}package.json'] - Glob pattern to match files.
 * @returns {string[]} - An array of file paths that match the glob pattern.
 */
function listInProject(root, match = '{,*,*/,*/*/*,*/*/*/*,*/*/*/*/*}package.json') {
  return glob.sync(match, { cwd: path.resolve(root) });
}

module.exports = {
  /**
   * Lists files in a project directory based on a glob pattern.
   *
   * @param {string} root - The project root directory.
   * @param {string} [match='{,*,*/,*/*/*,*/*/*/*,*/*/*/*/*}package.json'] - Glob pattern to match files.
   * @returns {string[]} - An array of file paths that match the glob pattern.
   */
  listInProject,
};</code></pre></div><h2>Code Breakdown</h2>
<h3>Importing Modules</h3>
<pre><code class="language-javascript">var path = require('path');
var {ignores} = importer.import('common ignore paths');
var {glob} = importer.import('glob files')
</code></pre>
<p>This code imports two modules:</p>
<ol>
<li><code>path</code>: a built-in Node.js module for working with file paths.</li>
<li><code>common ignore paths</code> and <code>glob files</code> from an <code>importer</code> module:
<ul>
<li><code>ignores</code> is expected to contain common ignore paths.</li>
<li><code>glob</code> is a function for finding files using glob patterns.</li>
</ul></li>
</ol>
<h3>Function <code>listInProject</code></h3>
<pre><code class="language-javascript">function listInProject(root, match = '{,*,*/,*/*/*,*/*/*/*,*/*/*/*/*}package.json') {
    return glob(match, path.resolve(root))
}
</code></pre>
<p>This function takes two parameters:</p>
<ol>
<li><code>root</code>: the root directory to search for files.</li>
<li><code>match</code> (optional, defaults to a glob pattern matching certain files): a glob pattern to use for finding files.</li>
</ol>
<p>The function uses the <code>glob</code> function to find files matching the provided glob pattern, in the specified <code>root</code> directory. It then resolves the <code>root</code> path using <code>path.resolve()</code>.</p>
<h3>Module Exports</h3>
<pre><code class="language-javascript">module.exports = {
    listInProject
}
</code></pre>
<p>This code exports the <code>listInProject</code> function as a module, making it available for use in other parts of the application.</p>

</body>

</html>