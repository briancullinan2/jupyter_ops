<!DOCTYPE html>
<html>

<head>
  <meta charset='utf-8'>
  <meta http-equiv='X-UA-Compatible' content='IE=edge'>
  <title>rename txt2img directories</title>
  <meta name='viewport' content='width=device-width, initial-scale=1'>
  <link rel='stylesheet' type='text/css' media='screen' href='main.css'>
  <style>
    html {
      padding: 0;
      margin: 0;
    }

    nav {
      position: fixed;
      overflow: auto;
      top: 0;
      left: 0;
      right: auto;
      bottom: 0;
      width: 200px;
    }

    header {
      background-color: #EEE;
      padding: 10px;
    }

    body {
      padding: 0 0 0 200px;
      margin: 0;
    }

    @media screen and (max-width: 600px) {
      body {
        padding-left: 0;
      }

      nav {
        display: none;
      }
    }
  </style>
</head>

<body>
  <nav>
    <h3><a href="../stable_diffusion/index.html">stable diffusion</a></h3>
    <a href="./rename_txt2img_directories.html">rename txt2img directories</a>
<br /><br />
<a href="./cell_1.html">Cell 1</a>
<br /><br />

  </nav>
  <header>
    <a href="../stable_diffusion/index.html">stable diffusion</a> |  | <a href="./cell_1.html">Cell 1</a> | <a href="../../search.html">Search</a>
  </header>

  <p>This code sets up paths to access images generated by a text-to-image AI, likely Stable Diffusion, specifically targeting a folder containing images of desserts in a manga anime style.</p>
<h2>Run example</h2>

<pre language="bash"><code>npm run import -- "rename txt2img directories"</code></pre><h1>rename txt2img directories</h1>



<pre class="javascript"><code>const fs = require('fs')
const path = require('path')

const HOMEPATH = process.env.HOME || process.env.HOMEPATH || process.env.USERPROFILE
const TXT2IMG = path.join(HOMEPATH, 'stable-diffusion-webui/outputs/txt2img-images')

const IMAGEPATH = path.join(TXT2IMG, 'desserts manga anime style with floral backgrounds')

let replacements = `Cherry Cobbler
Vanilla Cake
Chewy Chocolate Chip Cookies
Lemon Meringue Pie
Classic Strawberry Shortcake
Creme Brulee
Coconut Layer Cake
Lemon Bars
Tiramisu
Cheesecake
Fudgy Brownies
Banana Pudding
Peanut Brittle
Sugar Cookies for Decorating
Apple Pie
Butter Cookies
Peach Cobbler
Peanut Butter Cookies
Chocolate Lava Cakes
No-Bake Cheesecake
Chocolate Cupcakes
Banana Cake
Oatmeal Raisin Cookies
Bread Pudding
Carrot Cake
M&amp;M Cookies
Vanilla Cupcakes
Crepes
Angel Food Cake
Key Lime Pie
Crispy Chocolate Chip Cookies
New York-Style Cheesecake
Peanut Butter Blossoms
Chocolate Cake
Coconut Cream Pie
Apple Crisp
Pumpkin Pie
Pecan Pie
Gingerbread Cookies
Pumpkin Cheesecake
Fruitcake
The Desserts of Your Dreams
Layered Chocolate Mousse Cake
Croquembouche
Strawberry Pocky Stick Cake
Rose Cheesecake Tart
Chocolate-Vanilla Swirl Bundt Cake
Eight-Flavor Sheet Pan Brownie-Cookie Bars
Oreo Bombe
Chocolate Cinnamon Roll Wool Bread
Giant Chocolate PB Cookie Cake
Three-Flavor Diner Pie
Individual Meringue Swan Lakes
Unicorn Cake
Lemon-Blueberry Sunshine Tart
Geode Meringues
Giant Chocolate Lava Cake
Galaxy Cake
Pumpkin Charlotte Royale
Pineapple Upside-Down Doughnuts
Baked Alaska
Our Most-Comforting Dessert Ideas
Chocolate Croissant Bread Pudding with Bourbon Ice Cream Sauce
Peanut Butter Bars with Salted Chocolate Ganache
Baked Fudge
Chocolate Chip Cookies
Banana Pudding
Boston Cream Pie Cheesecake
Chocolate Fondue
Mini Peanut Butter &amp; Jelly Pies
Red Velvet Bread Pudding
Alton's Chocolate Pudding
Homemade Glazed Doughnuts
Warm Chocolate Cakes with Berries
Peanut Butter Cupboard Cookie Bars
Banana Pudding Tiramisu
Amaretto Chocolate Brownies
Triple Chocolate Pudding
Best Bread Pudding
Lizzie's Old-Fashioned Cocoa Cake with Caramel Icing
Rocky Road Pudding
Red Velvet Sandwich Cookies
Vanilla-Banana Pudding
Ooey Gooey Butter Cake
Monster Cookies
Peanut Butter and Jelly Bundt Cake
Individual Caramel Cakes
S'more Brownie Bites
Tarte Tatin
Carrot Cheesecake
Brownie Batter Cookies
Red Velvet Icebox Cake
Cookies and Cream Pudding
Cookies and Cream Cake
Crispy Chocolate Chip Cookies
Bananas Foster
Peanut Butter and Jelly Crumb Cake
Snickerdoodles
Giada's Rice Pudding
Fried Apple Pies
Dark Chocolate Mousse
Dark Chocolate Mousse`.split('\n')

function renameImages() {

  let images = fs.readdirSync(IMAGEPATH).sort((a, b) =&gt; fs.statSync(path.join(IMAGEPATH, a)).mtime - fs.statSync(path.join(IMAGEPATH, b)).mtime)

  for(let i = 0; i &lt; images.length; i++) {
    if (images[i][0] == '.') continue
    let seed = images[i].split(/-|\./gi)[1]
    fs.renameSync(path.join(IMAGEPATH, images[i]), 
      path.join( IMAGEPATH, (''+i).padStart((images.length+'').length, '0') + '-' + seed + '-' + replacements[i].replace(/[^a-z0-9 ]/gi, '_') + '.png' ))
  }

}

module.exports = renameImages

</code></pre>

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/default.min.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.css">


<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>

<!-- and it's easy to individually load additional languages -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/javascript.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/languages/bash.min.js"></script>
<script src="../../mergehtml.js"></script>

<script>
hljs.addPlugin(mergeHTMLPlugin);
hljs.highlightAll();
</script>

<p>This code snippet appears to be setting up paths for accessing image files generated by a text-to-image AI model, likely Stable Diffusion.</p>
<p>Here's a breakdown:</p>
<ol>
<li><p><strong>Dependencies:</strong></p>
<ul>
<li>It imports the <code>fs</code> (filesystem) and <code>path</code> modules, which are standard Node.js modules for interacting with files and directories.</li>
</ul></li>
<li><p><strong>Environment Variables:</strong></p>
<ul>
<li>It defines <code>HOMEPATH</code> to get the user's home directory path. This is used to construct the paths to the image files.</li>
</ul></li>
<li><p><strong>Image Directory:</strong></p>
<ul>
<li>It defines <code>TXT2IMG</code> as the path to the directory where the generated images are stored. It assumes the Stable Diffusion Web UI is installed and configured in the user's home directory.</li>
</ul></li>
<li><p><strong>Specific Image Path:</strong></p>
<ul>
<li>It defines <code>IMAGEPATH</code> as the path to a specific folder within <code>TXT2IMG</code> containing images of &quot;desserts manga anime style with floral backgrounds&quot;.</li>
</ul></li>
<li><p><strong>Replacements:</strong></p>
<ul>
<li>The <code>replacements</code> variable appears to be a list of dessert names, possibly intended for use in generating more image prompts or for other text processing tasks related to the images.</li>
</ul></li>
</ol>
<p>Let me know if you have any more questions!</p>

</body>

</html>